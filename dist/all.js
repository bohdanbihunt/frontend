"use strict";var _createClass=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var Modal=function(){function a(b){_classCallCheck(this,a),this.modal=b,this.counter=0,this.overlay=this.modal.querySelector(".modal__overlay"),this.buttonWrap=this.modal.querySelector("#button-wrap"),this.buttonHTML='<button class="btn-danger modal__button" onclick="resetCounter()" title="Reset counter">Reset</button>',this.modal.querySelector("#modal-close").addEventListener("click",this.close.bind(this)),this.overlay.addEventListener("click",this.close.bind(this)),-1!==document.cookie.indexOf("counter")&&(this.counter=parseInt(this.getCookie("counter")))}return _createClass(a,[{key:"open",value:function(){var a=this;this.counter+=1,this.modal.querySelector("#modal-counter").innerHTML=this.counter,this.modal.classList.add("active"),document.cookie="counter="+this.counter,this.counter>5&&(this.buttonWrap.innerHTML=this.buttonHTML),setTimeout(function(){a.overlay.classList.add("visible"),a.modal.querySelector(".modal__dialog").classList.add("visible")},1)}},{key:"close",value:function(){var a=this;this.overlay.classList.remove("visible"),this.modal.querySelector(".modal__dialog").classList.remove("visible"),setTimeout(function(){a.modal.classList.remove("active"),a.buttonWrap.innerHTML=""},150)}},{key:"getCookie",value:function(b){var a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]+)"));if(a)return a[2]}},{key:"reset",value:function(){document.cookie="counter=0",this.counter=0,this.close()}}]),a}(),modal=new Modal(document.querySelector(".modal"));window.openModal=modal.open.bind(modal),window.resetCounter=modal.reset.bind(modal)